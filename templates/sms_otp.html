{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2>Set up SMS Verification</h2>
    <form method="POST">

        <div class="mb-3">
            <label for="country">Select Country</label>
            <select name="country_code" class="form-select" required>
                <option value="">-- Select Country --</option>
                <option value="+44">United Kingdom (+44)</option>
                <option value="+1">United States (+1)</option>
                <option value="+61">Australia (+61)</option>
                <option value="+91">India (+91)</option>
                <option value="+49">Germany (+49)</option>
                <option value="+33">France (+33)</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="phone">Phone Number (without country code)</label>
            <input type="text" name="phone" class="form-control" required>
        </div>

        <button type="submit" class="btn btn-primary" id="send-btn">Send OTP</button>
    </form>

    <button class="btn btn-secondary mt-3" id="resend-btn" style="display: none;" onclick="location.reload();">
        Resend OTP (<span id="countdown">30</span>s)
    </button>
</div>

<script>
// Countdown timer
let countdown = 30;
let resendBtn = document.getElementById('resend-btn');
let countdownDisplay = document.getElementById('countdown');

document.getElementById('send-btn').addEventListener('click', function() {
    setTimeout(() => {
        resendBtn.style.display = 'inline-block';
        const interval = setInterval(() => {
            countdown -= 1;
            countdownDisplay.textContent = countdown;
            if (countdown <= 0) {
                clearInterval(interval);
                resendBtn.textContent = 'Resend OTP';
            }
        }, 1000);
    }, 500); // slight delay to show after form submission
});
</script>
{% endblock %}
